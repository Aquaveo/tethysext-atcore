{% extends "atcore/map_view/map_view.html" %}
{% load tethys_gizmos staticfiles %}

{# OVERRIDE DEFAULT ACTIVE TAB #}
{% block disable_default_tab %}{% endblock %}
{% block disable_default_tab_panel %}{% endblock %}

{% block custom_map_tabs %}
  {# WORKFLOW TAB #}
  {% include 'atcore/resource_workflows/components/workflow_tab.html' %}
{% endblock %}

{% block custom_map_tab_panels %}
  {# WORKFLOW TAB PANEL #}
  {% include 'atcore/resource_workflows/components/workflow_tab_content.html' %}
{% endblock %}

{% block map %}
  <form id="map-workflow-form" class="map-form" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input name="method" value="save-step-data" hidden>
    {{ block.super }}
  </form>
{% endblock %}

{% block app_actions %}
  {% if previous_step %}
  <button class="btn btn-default btn-previous" name="previous-submit" type='submit' form="map-workflow-form">Previous</button>
  {% endif %}

  {% if next_step %}
  <button class="btn btn-default btn-next" name="next-submit" type='submit' form="map-workflow-form">Next</button>
  {% else %}
  <button class="btn btn-default btn-next" name="next-submit" type='submit' form="map-workflow-form">Submit</button>
  {% endif %}

  {{ block.super }}
{% endblock %}

{% block content_dependent_styles %}
  {{ block.super }}
  <link href="{% static 'atcore/resource_workflows/workflow_steps.css' %}" rel="stylesheet"/>
  <link href="{% static 'atcore/resource_workflows/atcore_map_workflow.css' %}" rel="stylesheet"/>
{% endblock %}