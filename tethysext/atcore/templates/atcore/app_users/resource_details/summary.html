{% load static %}
{% widthratio 12 columns|length 1 as column_width %}

<div class="row">
  {% for column in columns %}
  <div class="col-md-{{ column_width }} summary-col">
    {% if forloop.first %}
      {# Preview Image #}
      {% if has_preview_image %}
      <div id="preview-map">
        <h6 class="resource-details table-header">Map Preview</h6>
        <table class="table">
          <tbody>
            <tr>
              <td class="map-preview">
                <img src="{% static 'agwa/images/loading.gif' %}" class="loading-gif centered">
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      {% endif %}
    {% endif %}

    {% for table_name, table in column %}
      <div>
        <h6 class="resource-details table-header">{{ table_name }}</h6>
        <table class="table table-hover">
          <tbody>
            {% for key, value in table.items %}
              <tr>
                <td class="name">{{ key }}</td>
                <td>{{ value }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    {% endfor %}
    {% if forloop.last %}
      {% if user.is_staff %}
      <div id="debug-info">
        <h6 class="resource-details table-header">Debugging Information</h6>
        <table class="table table-hover">
          <tbody>
            <tr>
              <td class="name">Resource ID</td>
              <td>{{ resource.id }}</td>
            </tr>
            <tr>
              <td class="name">Model Database ID</td>
              <td>{{ model_db_id }}</td>
            </tr>
            <tr>
              <td class="name">Current Base Model ID</td>
              <td>{{ base_model_id }}</td>
            </tr>
            <tr>
              <td class="name">Base Model History</td>
              <td>{{ base_model_history|join:", " }}</td>
            </tr>
            <tr>
              <td class="name">Locked Status</td>
              <td>{% if is_locked %}Locked{% else %}Unlocked{% endif %}</td>
            </tr>
            <tr>
              <td class="name">Locked By</td>
              <td>{{ locked_by }}</td>
            </tr>
          </tbody>
        </table>
      </div>
      {% endif %}
    {% endif %}
  </div>
  {% endfor %}
</div>